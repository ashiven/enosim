name: Unit Tests

on: [push]

jobs:
   build:
      runs-on: ubuntu-latest
      strategy:
         matrix:
            python-version: ["3.11"]

      steps:
         - uses: actions/checkout@v3
         - name: Set up Python ${{ matrix.python-version }}
           uses: actions/setup-python@v4
           with:
              python-version: ${{ matrix.python-version }}
              cache: "pip"
         - run: pip install -r requirements.txt
         - name: Run Tests
           run: |
              Path=$(pwd)/enosimulator
              export PYTHONPATH=$PYTHONPATH:..:../..:$Path
              python -m coverage run -m pytest -v -s
         - name: Generate Coverage Report
           run: |
              python -m coverage report -m
